(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{16434:function(ne,w,e){"use strict";var Y=e(9715),b=e(22712),J=e(57663),x=e(71577),y=e(47673),i=e(4107),h=e(22122),G=e(28991),z=e(87757),R=e.n(z),u=e(92137),F=e(81253),p=e(28481),c=e(67294),W=e(64893),$=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Q=c.forwardRef(function(o,ce){var X=(0,c.useState)(o.countDown||60),H=(0,p.Z)(X,2),se=H[0],oe=H[1],ie=(0,c.useState)(!1),O=(0,p.Z)(ie,2),S=O[0],V=O[1],k=(0,c.useState)(),q=(0,p.Z)(k,2),fe=q[0],ee=q[1],he=o.rules,Ee=o.name,_=o.phoneName,ae=o.fieldProps,v=o.captchaTextRender,me=v===void 0?function(j,D){return j?"".concat(D," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:v,le=o.captchaProps,pe=(0,F.Z)(o,$),T=function(){var j=(0,u.Z)(R().mark(function D(K){return R().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,ee(!0),E.next=4,pe.onGetCaptcha(K);case 4:ee(!1),V(!0),E.next=13;break;case 8:E.prev=8,E.t0=E.catch(0),V(!1),ee(!1),console.log(E.t0);case 13:case"end":return E.stop()}},D,null,[[0,8]])}));return function(K){return j.apply(this,arguments)}}();return(0,c.useEffect)(function(){var j=0,D=o.countDown;return S&&(j=window.setInterval(function(){oe(function(K){return K<=1?(V(!1),clearInterval(j),D||60):K-1})},1e3)),function(){return clearInterval(j)}},[S]),c.createElement(b.Z.Item,{noStyle:!0,shouldUpdate:!0},function(j){var D=j.getFieldValue,K=j.validateFields;return c.createElement("div",{style:(0,G.Z)((0,G.Z)({},ae==null?void 0:ae.style),{},{display:"flex",alignItems:"center"}),ref:ce},c.createElement(i.Z,(0,h.Z)({},ae,{style:{flex:1,transition:"width .3s",marginRight:8}})),c.createElement(x.Z,(0,h.Z)({style:{display:"block"},disabled:S,loading:fe},le,{onClick:(0,u.Z)(R().mark(function re(){var E;return R().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!_){a.next=9;break}return a.next=4,K([_].flat(1));case 4:return E=D([_].flat(1)),a.next=7,T(E);case 7:a.next=11;break;case 9:return a.next=11,T("");case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0);case 16:case"end":return a.stop()}},re,null,[[0,13]])}))}),me(S,se)))})});w.Z=(0,W.G)(Q)},5966:function(ne,w,e){"use strict";var Y=e(22122),b=e(81253),J=e(67294),x=e(97676),y=["fieldProps","proFieldProps"],i=["fieldProps","proFieldProps"],h="text",G=function(F){var p=F.fieldProps,c=F.proFieldProps,W=(0,b.Z)(F,y);return J.createElement(x.Z,(0,Y.Z)({mode:"edit",valueType:h,fieldProps:p,filedConfig:{valueType:h},proFieldProps:c},W))},z=function(F){var p=F.fieldProps,c=F.proFieldProps,W=(0,b.Z)(F,i);return J.createElement(x.Z,(0,Y.Z)({mode:"edit",valueType:"password",fieldProps:p,proFieldProps:c,filedConfig:{valueType:h}},W))},R=G;R.Password=z,R.displayName="ProFormComponent",w.Z=R},43504:function(ne,w,e){"use strict";e.d(w,{U:function(){return F}});var Y=e(22122),b=e(84305),J=e(75901),x=e(28991),y=e(81253),i=e(67294),h=e(5894),G=e(7381),z=e(32384),R=e.n(z),u=["logo","message","title","subTitle","actions","children"];function F(p){var c=p.logo,W=p.message,$=p.title,Q=p.subTitle,o=p.actions,ce=p.children,X=(0,y.Z)(p,u),H=(0,G.YB)(),se=(0,x.Z)({searchConfig:{submitText:H.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(k,q){return q.pop()},submitButtonProps:{size:"large",style:{width:"100%"}}},X.submitter),oe=(0,i.useContext)(J.ZP.ConfigContext),ie=oe.getPrefixCls("pro-form-login"),O=function(k){return"".concat(ie,"-").concat(k)},S=(0,i.useMemo)(function(){return c?typeof c=="string"?i.createElement("img",{src:c}):c:null},[c]);return i.createElement("div",{className:O("container")},i.createElement("div",{className:O("top")},$||S?i.createElement("div",{className:O("header")},S?i.createElement("span",{className:O("logo")},S):null,$?i.createElement("span",{className:O("title")},$):null):null,Q?i.createElement("div",{className:O("desc")},Q):null),i.createElement("div",{className:O("main")},i.createElement(h.A,(0,Y.Z)({isKeyPressSubmit:!0},X,{submitter:se}),W,ce),o?i.createElement("div",{className:O("other")},o):null))}},34687:function(ne){ne.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},67256:function(ne,w,e){"use strict";e.r(w),e.d(w,{default:function(){return Le}});var Y=e(18106),b=e(51752),J=e(34792),x=e(48086),y=e(8870),i=e(3182),h=e(2824),G=e(17462),z=e(76772),R=e(94043),u=e.n(R),F=e(36108),p=e(48107),c=e(39464),W=e(89366),$=e(2603),Q=e(80521),o=e(67294),ce=e(63185),X=e(9676),H=e(22122),se=e(28991),oe=e(81253),ie=e(97676),O=e(22270),S=e(64893),V=["options","fieldProps","proFieldProps","valueEnum"],k=o.forwardRef(function(l,P){var M=l.options,A=l.fieldProps,f=l.proFieldProps,U=l.valueEnum,d=(0,oe.Z)(l,V);return o.createElement(ie.Z,(0,H.Z)({ref:P,valueType:"checkbox",mode:"edit",valueEnum:(0,O.h)(U,void 0),fieldProps:(0,se.Z)({options:M},A),proFieldProps:f},d))}),q=o.forwardRef(function(l,P){var M=l.fieldProps,A=l.children;return o.createElement(X.Z,(0,H.Z)({ref:P},M),A)}),fe=(0,S.G)(q,{valuePropName:"checked"}),ee=fe;ee.Group=k;var he=ee,Ee=e(43504),_=e(5966),ae=e(16434),v=e(32773),me=e(29791),le=e(82566),pe=e(34687),T=e.n(pe),j=e(73138);/*! js-cookie v3.0.1 | MIT */function D(l){for(var P=1;P<arguments.length;P++){var M=arguments[P];for(var A in M)l[A]=M[A]}return l}var K={read:function(l){return l[0]==='"'&&(l=l.slice(1,-1)),l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(l){return encodeURIComponent(l).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function re(l,P){function M(f,U,d){if(typeof document!="undefined"){d=D({},P,d),typeof d.expires=="number"&&(d.expires=new Date(Date.now()+d.expires*864e5)),d.expires&&(d.expires=d.expires.toUTCString()),f=encodeURIComponent(f).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var B="";for(var N in d)!d[N]||(B+="; "+N,d[N]!==!0&&(B+="="+d[N].split(";")[0]));return document.cookie=f+"="+l.write(U,f)+B}}function A(f){if(!(typeof document=="undefined"||arguments.length&&!f)){for(var U=document.cookie?document.cookie.split("; "):[],d={},B=0;B<U.length;B++){var N=U[B].split("="),de=N.slice(1).join("=");try{var I=decodeURIComponent(N[0]);if(d[I]=l.read(de,I),f===I)break}catch(ve){}}return f?d[f]:d}}return Object.create({set:M,get:A,remove:function(f,U){M(f,"",D({},U,{expires:-1}))},withAttributes:function(f){return re(this.converter,D({},this.attributes,f))},withConverter:function(f){return re(D({},this.converter,f),this.attributes)}},{attributes:{value:Object.freeze(P)},converter:{value:Object.freeze(l)}})}var E=re(K,{path:"/"}),Z=E,a=e(85893),je=function(P){var M=P.content;return(0,a.jsx)(z.Z,{style:{marginBottom:24},message:M,type:"error",showIcon:!0})},Ie=function(){var P=(0,o.useState)({}),M=(0,h.Z)(P,2),A=M[0],f=M[1],U=(0,o.useState)("account"),d=(0,h.Z)(U,2),B=d[0],N=d[1],de=(0,v.tT)("@@initialState"),I=de.initialState,ve=de.setInitialState,Pe=(0,o.useRef)(),ye=(0,o.useState)(!0),Me=(0,h.Z)(ye,2),Re=Me[0],Se=Me[1],Ae=(0,o.useState)(""),Ce=(0,h.Z)(Ae,2),Ue=Ce[0],be=Ce[1],We=(0,o.useState)(""),xe=(0,h.Z)(We,2),Fe=xe[0],Ke=xe[1],Ne=(0,o.useState)(""),Oe=(0,h.Z)(Ne,2),ue=Oe[0],we=Oe[1],L=(0,v.YB)(),$e=function(){var n=Z.get("username"),s=Z.get("password"),r=Z.get("phone"),C=Z.get("rememberMe");return{username:n,password:s,rememberMe:C==="true",phone:r}},De=function(){var g=(0,i.Z)(u().mark(function n(){var s,r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,le.Pb)();case 2:s=t.sent,s.code===200&&(r=s.data,r.captchaOnOff?(be("data:image/gif;base64,".concat(r.img)),Ke(r.uuid)):Se(r.captchaOnOff));case 4:case"end":return t.stop()}},n)}));return function(){return g.apply(this,arguments)}}();(0,o.useEffect)(function(){De()},[]);var Ge=function(){var g=(0,i.Z)(u().mark(function n(){var s,r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I==null||(s=I.fetchUserInfo)===null||s===void 0?void 0:s.call(I);case 2:if(r=t.sent,!r){t.next=6;break}return t.next=6,ve(function(te){return(0,y.Z)((0,y.Z)({},te),{},{currentUser:r})});case 6:case"end":return t.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),ze=function(){var g=(0,i.Z)(u().mark(function n(){var s,r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I==null||(s=I.fetchMenuInfo)===null||s===void 0?void 0:s.call(I);case 2:if(r=t.sent,!r){t.next=6;break}return t.next=6,ve(function(te){return(0,y.Z)((0,y.Z)({},te),{},{customMenuData:r})});case 6:case"end":return t.stop()}},n)}));return function(){return g.apply(this,arguments)}}(),He=function(){var g=(0,i.Z)(u().mark(function n(s){var r,C,t,te,Ze,Be,Te;return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(ue){m.next=3;break}return x.default.error("\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801"),m.abrupt("return");case 3:return m.prev=3,s.autoLogin===!0?(B==="account"?(Z.set("username",s.username||"",{expires:30}),Z.set("password",s.password||"",{expires:30})):B==="mobile"&&Z.set("phone",s.phone||"",{expires:30}),Z.set("rememberMe","true",{expires:30})):(Z.remove("username"),Z.remove("password"),Z.remove("phone"),Z.remove("rememberMe")),m.next=7,(0,le.x4)((0,y.Z)((0,y.Z)({},s),{},{code:ue,uuid:Fe}));case 7:if(r=m.sent,r.code!==200){m.next=22;break}return(0,j.o4)((r==null||(C=r.data)===null||C===void 0?void 0:C.token)||""),t=L.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),x.default.success(t),m.next=14,Ge();case 14:return m.next=16,ze();case 16:if(v.m8){m.next=18;break}return m.abrupt("return");case 18:return te=v.m8.location.query,Ze=te,Be=Ze.redirect,v.m8.push(Be||"/"),m.abrupt("return");case 22:console.log(r),f(r),m.next=30;break;case 26:m.prev=26,m.t0=m.catch(3),Te=L.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),x.default.error(Te);case 30:case"end":return m.stop()}},n,null,[[3,26]])}));return function(s){return g.apply(this,arguments)}}(),ge=A.code,Ve="account";return(0,a.jsxs)("div",{className:T().container,children:[(0,a.jsx)("div",{className:T().content,children:(0,a.jsxs)(Ee.U,{formRef:Pe,logo:(0,a.jsx)("img",{alt:"logo",style:{borderRadius:30},src:"/logo1.jpg"}),title:"\u5BFB \u8DEF",subTitle:L.formatMessage({id:"pages.layouts.userLayout.title"}),request:(0,i.Z)(u().mark(function g(){var n;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=$e(),r.abrupt("return",{autoLogin:n.rememberMe,username:n.username,password:n.password,phone:n.phone});case 2:case"end":return r.stop()}},g)})),actions:[(0,a.jsx)(v._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,a.jsx)(F.Z,{className:T().icon},"AlipayCircleOutlined"),(0,a.jsx)(p.Z,{className:T().icon},"TaobaoCircleOutlined"),(0,a.jsx)(c.Z,{className:T().icon},"WeiboCircleOutlined")],onFinish:function(){var g=(0,i.Z)(u().mark(function n(s){return u().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,He(s);case 2:case"end":return C.stop()}},n)}));return function(n){return g.apply(this,arguments)}}(),children:[(0,a.jsxs)(b.Z,{activeKey:B,onChange:N,children:[(0,a.jsx)(b.Z.TabPane,{tab:L.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,a.jsx)(b.Z.TabPane,{tab:L.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),ge&&ge!==200&&Ve==="account"&&(0,a.jsx)(je,{content:L.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/admin123)"})}),B==="account"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{name:"username",fieldProps:{size:"large",prefix:(0,a.jsx)(W.Z,{className:T().prefixIcon})},placeholder:L.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin"}),rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,a.jsx)(_.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)($.Z,{className:T().prefixIcon})},placeholder:L.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: admin123"}),rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),ge!==200&&!1,B==="mobile"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)(Q.Z,{className:T().prefixIcon})},name:"phone",placeholder:L.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,a.jsx)(v._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,a.jsx)(ae.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)($.Z,{className:T().prefixIcon})},captchaProps:{size:"large"},placeholder:L.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(n,s){return n?"".concat(s," ").concat(L.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):L.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,a.jsx)(v._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:(0,i.Z)(u().mark(function g(){var n,s,r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=((n=Pe.current)===null||n===void 0?void 0:n.getFieldsValue().phone)||"",s){t.next=4;break}throw x.default.error("\u8BF7\u586B\u5199\u624B\u673A\u53F7\uFF01"),new Error("\u8BF7\u586B\u5199\u624B\u673A\u53F7\uFF01");case 4:if(ue){t.next=7;break}throw x.default.error("\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801\uFF01"),new Error("\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801\uFF01");case 7:return t.next=9,(0,le.mJ)({phone:s,uuid:Fe,code:ue});case 9:if(r=t.sent,r.code!==200){t.next=15;break}return x.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A".concat(r.data)),t.abrupt("return");case 15:throw new Error(r.msg);case 16:case"end":return t.stop()}},g)}))})]}),Re&&(0,a.jsx)("div",{className:"ant-row ant-form-item",style:{rowGap:"0px"},children:(0,a.jsx)("div",{className:"ant-col ant-form-item-control",children:(0,a.jsx)("div",{className:"ant-form-item-control-input",children:(0,a.jsx)("div",{className:"ant-form-item-control-input-content",children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)("span",{className:"ant-input-affix-wrapper ant-input-affix-wrapper-lg",style:{flex:"1 1 0%",transition:" width 0.3s ease 0s",marginRight:"8px"},children:[(0,a.jsx)("span",{className:"ant-input-prefix"}),(0,a.jsx)("input",{id:"captcha",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",onChange:function(n){we(n.target.value)},className:"ant-input",type:"text",value:ue})]}),(0,a.jsx)("img",{src:Ue,style:{width:"100px",height:"40.14px",cursor:"pointer"},onClick:De})]})})})})}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)(he,{noStyle:!0,name:"autoLogin",children:(0,a.jsx)(v._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,a.jsx)("a",{style:{float:"right"},onClick:function(){return v.m8.push("/user/resetPassword"),!1},children:(0,a.jsx)(v._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,a.jsx)(me.Z,{})]})},Le=Ie}}]);
