(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[763],{16894:function(B,g,e){"use strict";var W=e(7381),C=e(34590);g.ZP=C.Z},41645:function(B,g,e){"use strict";e.r(g),e.d(g,{default:function(){return X}});var W=e(57338),C=e(25084),ee=e(49111),T=e(19650),re=e(62350),j=e(75443),te=e(57663),A=e(71577),ne=e(71153),L=e(60331),y=e(2824),K=e(86582),ae=e(34792),m=e(48086),v=e(3182),M=e(94043),a=e.n(M),Y=e(73171),I=e(67294),z=e(80853),G=e(16894),U=e(96459),O=e(8870),Z=e(55168);function b(i,s){return R.apply(this,arguments)}function R(){return R=(0,v.Z)(a().mark(function i(s,n){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Z.WY)("/api/monitor/operlog/list",(0,O.Z)({method:"GET",params:(0,O.Z)({},s)},n)));case 1:case"end":return t.stop()}},i)})),R.apply(this,arguments)}function N(){return S.apply(this,arguments)}function S(){return S=(0,v.Z)(a().mark(function i(){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,Z.WY)("/api/monitor/operlog/clean",{method:"DELETE"}));case 1:case"end":return n.stop()}},i)})),S.apply(this,arguments)}function H(i){return E.apply(this,arguments)}function E(){return E=(0,v.Z)(a().mark(function i(s){return a().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.WY)("/api/monitor/operlog/".concat(s),{method:"DELETE"}));case 1:case"end":return o.stop()}},i)})),E.apply(this,arguments)}var u=e(85893),J=function(){var i=(0,v.Z)(a().mark(function s(){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.default.loading("Configuring"),t.prev=1,t.next=4,N();case 4:return n(),m.default.success("Configuration is successful"),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(1),n(),m.default.error("Configuration failed, please try again!"),t.abrupt("return",!1);case 14:case"end":return t.stop()}},s,null,[[1,9]])}));return function(){return i.apply(this,arguments)}}(),Q=function(){var i=(0,v.Z)(a().mark(function s(n){var o;return a().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=m.default.loading("\u6B63\u5728\u5220\u9664"),n){l.next=3;break}return l.abrupt("return",!0);case 3:return l.prev=3,l.next=6,H((0,K.Z)(n.map(function(D){return D.operId})));case 6:return o(),m.default.success("\u5220\u9664\u6210\u529F"),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(3),o(),m.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\uFF01"),l.abrupt("return",!1);case 16:case"end":return l.stop()}},s,null,[[3,11]])}));return function(n){return i.apply(this,arguments)}}(),V=function(){var s=(0,I.useState)(!1),n=(0,y.Z)(s,2),o=n[0],t=n[1],l=(0,I.useRef)(),D=(0,I.useState)(),$=(0,y.Z)(D,2),c=$[0],x=$[1],k=(0,I.useState)([]),w=(0,y.Z)(k,2),q=w[0],F=w[1],P=[{title:"\u65E5\u5FD7\u7F16\u53F7",dataIndex:"operId",hideInSearch:!0,render:function(d,r){return(0,u.jsx)("a",{onClick:function(){x(r),t(!0)},children:d})}},{title:"\u7CFB\u7EDF\u6A21\u5757",dataIndex:"title"},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"operatorType",valueType:"select"},{title:"\u8BF7\u6C42\u65B9\u5F0F",dataIndex:"requestMethod",hideInSearch:!0},{title:"\u64CD\u4F5C\u4EBA\u5458",dataIndex:"operName"},{title:"\u64CD\u4F5C\u5730\u5740",dataIndex:"operIp",hideInSearch:!0},{title:"\u64CD\u4F5C\u5730\u70B9",dataIndex:"operLocation",hideInSearch:!0},{title:"\u64CD\u4F5C\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{"0":{text:(0,u.jsx)(L.Z,{color:"green",children:"\u6210\u529F"}),status:"Default"},"1":{text:(0,u.jsx)(L.Z,{color:"green",children:"\u5931\u8D25"}),status:"Processing"}}},{title:"\u64CD\u4F5C\u65E5\u671F",sorter:!0,dataIndex:"operTime",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C\u65B9\u6CD5",dataIndex:"method",hideInSearch:!0,hideInForm:!0,hideInTable:!0},{title:"\u8BF7\u6C42\u53C2\u6570",dataIndex:"operParam",hideInSearch:!0,hideInForm:!0,hideInTable:!0},{title:"\u8FD4\u56DE\u53C2\u6570",dataIndex:"jsonResult",hideInSearch:!0,hideInForm:!0,hideInTable:!0}];return(0,u.jsxs)(z.ZP,{children:[(0,u.jsx)(G.ZP,{headerTitle:"\u64CD\u4F5C\u65E5\u5FD7\u5217\u8868",actionRef:l,rowKey:"operId",search:{labelWidth:120},toolBarRender:function(){return[(0,u.jsxs)(j.Z,{title:"\u786E\u5B9A\u8981\u6E05\u7A7A\u64CD\u4F5C\u65E5\u5FD7?",onConfirm:(0,v.Z)(a().mark(function d(){var r,h;return a().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,J();case 2:(r=l.current)===null||r===void 0||(h=r.reloadAndRest)===null||h===void 0||h.call(r);case 3:case"end":return p.stop()}},d)})),onCancel:function(){},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:[(0,u.jsxs)(A.Z,{type:"primary",children:[(0,u.jsx)(Y.Z,{})," \u6E05\u7A7A"]},"primary"),","]})]},request:b,columns:P,rowSelection:{onChange:function(d,r){F(r)}},tableAlertRender:function(d){var r=d.selectedRowKeys,h=d.onCleanSelected;return(0,u.jsx)(T.Z,{size:24,children:(0,u.jsxs)("span",{children:["\u5DF2\u9009 ",r.length," \u9879",(0,u.jsx)("a",{style:{marginLeft:8},onClick:h,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(){return(0,u.jsx)(T.Z,{size:16,children:(0,u.jsx)(j.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u64CD\u4F5C\u65E5\u5FD7?",onConfirm:(0,v.Z)(a().mark(function d(){var r,h;return a().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Q(q);case 2:F([]),(r=l.current)===null||r===void 0||(h=r.reloadAndRest)===null||h===void 0||h.call(r);case 4:case"end":return p.stop()}},d)})),onCancel:function(){},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,u.jsx)(A.Z,{children:"\u6279\u91CF\u5220\u9664"})})})}}),(0,u.jsx)(C.Z,{width:600,visible:o,onClose:function(){x(void 0),t(!1)},closable:!1,children:(c==null?void 0:c.title)&&(0,u.jsx)(U.Z,{column:2,title:c==null?void 0:c.title,request:(0,v.Z)(a().mark(function f(){return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{data:c||{}});case 1:case"end":return r.stop()}},f)})),params:{id:c==null?void 0:c.title},columns:P})})]})},X=V}}]);
